{% extends "professor/base.html" %}
{% load static %}

{% block title %}{{ class_obj.subject }} - Class Detail{% endblock %}

{% block content %}
<div class="min-h-screen bg-slate-50">
    <!-- Header Bar -->
    <div class="nav-bar">
        <div class="container" style="padding-top: 16px; padding-bottom: 16px;">
            <a href="{% url 'professor:dashboard' %}" class="btn btn-ghost" style="margin-bottom: 16px;">
                ‚Üê Back to Dashboard
            </a>

            <div style="display: flex; align-items: flex-start; justify-content: space-between; flex-wrap: wrap; gap: 16px;">
                <div style="display: flex; align-items: flex-start; gap: 16px;">
                    <div class="nav-icon">üìö</div>
                    <div>
                        <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 8px;">
                            <h1 style="font-size: 30px; margin: 0;">{{ class_obj.subject }}</h1>
                                     <a href="{% url 'professor:edit_class' class_obj.id %}"
                                         class="btn btn-sm btn-icon-square"
                                         style="display: inline-flex; align-items: center; justify-content: center;">
                                ‚úèÔ∏è
                            </a>
                        </div>
                        <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 8px;">
                            {% if class_obj.section %}
                            <span class="badge badge-secondary">Section: {{ class_obj.section }}</span>
                            {% endif %}
                            {% if class_obj.room %}
                            <span class="badge badge-outline">Room: {{ class_obj.room }}</span>
                            {% endif %}
                        </div>
                        {% if class_obj.description %}
                        <p style="color: #64748b; max-width: 600px;">{{ class_obj.description }}</p>
                        {% endif %}
                    </div>
                </div>

                <div style="display: flex; flex-direction: column; align-items: flex-end; gap: 8px;">
                    <a href="{% url 'professor:activate_qr' class_obj.id %}" class="btn btn-primary btn-lg">
                        üî≤ Activate QR Scanning
                    </a>
                </div>
            </div>
        </div>
    </div>

    <!-- Content Tabs -->
    <div class="container" style="padding-top: 32px; padding-bottom: 32px;">
        <div style="width: 100%;">
            <!-- Tabs Navigation -->
            <div class="tabs-list">
                <a href="{% url 'professor:class_detail' class_obj.id %}?tab=overview" 
                   class="tab-trigger {% if active_tab == 'overview' %}active{% endif %}">
                    Overview
                </a>
                <a href="{% url 'professor:class_detail' class_obj.id %}?tab=schedule" 
                   class="tab-trigger {% if active_tab == 'schedule' %}active{% endif %}">
                    Schedule
                </a>
                <a href="{% url 'professor:class_detail' class_obj.id %}?tab=announcements" 
                   class="tab-trigger {% if active_tab == 'announcements' %}active{% endif %}">
                    Announcements
                </a>
                <a href="{% url 'professor:class_detail' class_obj.id %}?tab=attendance" 
                   class="tab-trigger {% if active_tab == 'attendance' %}active{% endif %}">
                    Attendance
                </a>
                <a href="{% url 'professor:class_detail' class_obj.id %}?tab=students" 
                   class="tab-trigger {% if active_tab == 'students' %}active{% endif %}">
                    Students
                </a>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                {% if active_tab == 'overview' %}
                    {% include 'professor/tabs/overview.html' %}
                {% elif active_tab == 'schedule' %}
                    {% include 'professor/tabs/schedule.html' %}
                {% elif active_tab == 'announcements' %}
                    {% include 'professor/tabs/announcements.html' %}
                {% elif active_tab == 'attendance' %}
                    {% include 'professor/tabs/attendance.html' %}
                {% elif active_tab == 'students' %}
                    {% include 'professor/tabs/students.html' %}
                {% else %}
                    {% include 'professor/tabs/overview.html' %}
                {% endif %}
            </div>
        </div>
    </div>
</div>

<script>
function copyClassCode(code) {
    navigator.clipboard.writeText(code).then(function() {
        alert('Class code copied to clipboard!');
    }, function() {
        // Fallback for older browsers
        const textArea = document.createElement('textarea');
        textArea.value = code;
        document.body.appendChild(textArea);
        textArea.select();
        document.execCommand('copy');
        document.body.removeChild(textArea);
        alert('Class code copied to clipboard!');
    });
}
</script>
{% endblock %}
