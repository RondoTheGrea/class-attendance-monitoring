{% extends "student/base.html" %}
{% load static %}
{% load professor_extras %}

{% block title %}{{ class_obj.subject }} - Class Detail{% endblock %}

{% block content %}
<div class="min-h-screen bg-slate-50">
    <!-- Header Bar -->
    <div class="nav-bar">
        <div class="container" style="padding-top: 16px; padding-bottom: 16px;">
            <a href="{% url 'student:dashboard' %}" class="btn btn-ghost" style="margin-bottom: 16px;">
                ‚Üê Back to Dashboard
            </a>

            <div style="display: flex; align-items: flex-start; justify-content: space-between; flex-wrap: wrap; gap: 16px;">
                <div style="display: flex; align-items: flex-start; gap: 16px;">
                    <div class="nav-icon">üìö</div>
                    <div>
                        <h1 style="font-size: 30px; margin-bottom: 8px;">{{ class_obj.subject }}</h1>
                        <div style="display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 8px;">
                            {% if class_obj.section %}
                            <span class="badge badge-secondary">Section {{ class_obj.section }}</span>
                            {% endif %}
                            {% if class_obj.room %}
                            <span class="badge badge-outline">üìç {{ class_obj.room }}</span>
                            {% endif %}
                        </div>
                        {% if class_obj.description %}
                        <p style="color: #64748b; max-width: 600px;">{{ class_obj.description }}</p>
                        {% endif %}
                    </div>
                </div>

                <form method="post" action="{% url 'student:leave_class' class_obj.id %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-outline btn-lg" 
                            onclick="return confirm('Are you sure you want to leave this class?');">
                        Leave Class
                    </button>
                </form>
            </div>
        </div>
    </div>

    <!-- Content Tabs -->
    <div class="container" style="padding-top: 32px; padding-bottom: 32px;">
        <div style="width: 100%;">
            <!-- Tabs Navigation -->
            <div class="tabs-list">
                <a href="{% url 'student:class_detail' class_obj.id %}?tab=overview" 
                   class="tab-trigger {% if active_tab == 'overview' %}active{% endif %}">
                    Overview
                </a>
                <a href="{% url 'student:class_detail' class_obj.id %}?tab=schedule" 
                   class="tab-trigger {% if active_tab == 'schedule' %}active{% endif %}">
                    Schedule
                </a>
                <a href="{% url 'student:class_detail' class_obj.id %}?tab=announcements" 
                   class="tab-trigger {% if active_tab == 'announcements' %}active{% endif %}">
                    Announcements
                </a>
                <a href="{% url 'student:class_detail' class_obj.id %}?tab=attendance" 
                   class="tab-trigger {% if active_tab == 'attendance' %}active{% endif %}">
                    My Attendance
                </a>
            </div>

            <!-- Tab Content -->
            <div class="tab-content">
                {% if active_tab == 'overview' %}
                    {% include 'student/tabs/overview.html' %}
                {% elif active_tab == 'schedule' %}
                    {% include 'student/tabs/schedule.html' %}
                {% elif active_tab == 'announcements' %}
                    {% include 'student/tabs/announcements.html' %}
                {% elif active_tab == 'attendance' %}
                    {% include 'student/tabs/attendance.html' %}
                {% else %}
                    {% include 'student/tabs/overview.html' %}
                {% endif %}
            </div>
        </div>
    </div>
</div>
{% endblock %}
